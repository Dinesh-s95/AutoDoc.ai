= User Management API Documentation

== Introduction

This API provides services related to user management for a mobility platform. It allows operations such as user onboarding and vehicle assignment to users. The API is designed for internal use by other services within the mobility platform ecosystem.

=== Authentication Requirements

All API requests require authentication. The API uses Bearer Token authentication. Ensure you have obtained a valid token to access the endpoints.

=== Base URL and Versioning

The base URL for the API is `https://api.example.com/`. This documentation refers to version 1 of the API (`v1`).

=== How to Use This Specification

This document is structured to provide all necessary details to interact with the API effectively. Use the OpenAPI 3.0 specification provided to import into tools like Swagger UI, Postman, or Insomnia for testing and integration purposes.

== OpenAPI 3.0 YAML Specification

[source,yaml]
----
openapi: 3.0.0
info:
  title: User Management API
  version: 1.0.0
  description: API for managing users and their vehicle assignments in a mobility platform.
servers:
  - url: https://api.example.com/v1
    description: Production server

paths:
  /users/onboard:
    post:
      summary: Onboard a new user
      operationId: onboardUser
      tags:
        - Users
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
        - name: password
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User successfully onboarded
          content:
            text/plain:
              schema:
                type: string
        '400':
          description: Bad request if parameters are missing or invalid
        '401':
          description: Unauthorized if authentication fails
  /users/assign-vehicle:
    post:
      summary: Assign a vehicle to a user
      operationId: assignVehicle
      tags:
        - Users
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
        - name: vin
          in: query
          required: true
          schema:
            type: string
        - name: brand
          in: query
          required: true
          schema:
            type: string
        - name: country
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vehicle successfully assigned to the user
          content:
            text/plain:
              schema:
                type: string
        '400':
          description: Bad request if parameters are missing or invalid
        '401':
          description: Unauthorized if authentication fails

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - bearerAuth: []

----

== API Documentation

=== Endpoint Descriptions and Usage Examples

==== Onboard User

Endpoint to onboard a new user into the system.

POST `/users/onboard?username={username}&password={password}`

Example Request:
[source,json]
----
POST /users/onboard?username=johndoe&password=securePassword123
Authorization: Bearer <Your-Token>
----

Example Response:
[source]
----
HTTP/1.1 200 OK
User successfully onboarded
----

==== Assign Vehicle

Endpoint to assign a vehicle to an existing user.

POST `/users/assign-vehicle?username={username}&vin={vin}&brand={brand}&country={country}`

Example Request:
[source,json]
----
POST /users/assign-vehicle?username=johndoe&vin=1HGCM82633A004352&brand=Toyota&country=USA
Authorization: Bearer <Your-Token>
----

Example Response:
[source]
----
HTTP/1.1 200 OK
Vehicle successfully assigned to the user
----

=== Authentication Flows

To access the API, a valid JWT must be included in the `Authorization` header as a Bearer token.

=== Common Error Codes

- `400 Bad Request`: Your request is invalid or missing parameters.
- `401 Unauthorized`: Your API token is wrong, expired, or missing.

=== Rate Limiting Information

Currently, there is no rate limiting enforced on this API. However, this may change in future versions to ensure fair usage.