= User Management API Documentation

== Introduction

The User Management API provides functionalities related to managing users and their associated vehicles in a mobility service platform. This API allows operations such as user onboarding and vehicle assignment to users.

=== Authentication Requirements

All API requests require authentication. Clients must provide a valid API key as a part of the request header.

=== Base URL and Versioning

The base URL for all API endpoints is `https://api.example.com/v1`. This documentation refers to version 1 of the API.

=== How to Use This Specification

This document is structured to provide all necessary details to interact with the API effectively. Use this specification to understand the request and response formats and to learn about the available endpoints. You can import the YAML specification into tools like Swagger UI, Postman, or Insomnia to interact with the API directly.

== OpenAPI 3.0 YAML Specification

[source,yaml]
----
openapi: 3.0.0
info:
  title: User Management API
  version: 1.0.0
  description: API for managing users and their vehicles in a mobility service platform.
servers:
  - url: https://api.example.com/v1
    description: Production server

paths:
  /users/onboard:
    post:
      summary: Onboard a new user
      operationId: onboardUser
      tags:
        - Users
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
        - name: password
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User successfully onboarded
          content:
            text/plain:
              schema:
                type: string
                example: "User onboarded successfully"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /users/assign-vehicle:
    post:
      summary: Assign a vehicle to a user
      operationId: assignVehicle
      tags:
        - Users
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
        - name: vin
          in: query
          required: true
          schema:
            type: string
        - name: brand
          in: query
          required: true
          schema:
            type: string
        - name: country
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Vehicle assigned to user
          content:
            text/plain:
              schema:
                type: string
                example: "Vehicle assigned successfully"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
        code:
          type: integer

security:
  - ApiKeyAuth: []

securitySchemes:
  ApiKeyAuth:
    type: apiKey
    in: header
    name: X-API-Key
----

== API Documentation

=== Endpoint Descriptions and Usage Examples

==== Onboard User

Endpoint to onboard a new user into the system. Requires username and password.

Example Request:
[source,http]
----
POST /users/onboard?username=johndoe&password=securepassword HTTP/1.1
Host: api.example.com
X-API-Key: yourapikey
----

Example Response:
[source,http]
----
HTTP/1.1 200 OK
Content-Type: text/plain

User onboarded successfully
----

==== Assign Vehicle to User

Endpoint to assign a vehicle to an existing user. Requires username, vehicle identification number (VIN), brand, and country of the vehicle.

Example Request:
[source,http]
----
POST /users/assign-vehicle?username=johndoe&vin=1HGCM82633A004352&brand=Honda&country=USA HTTP/1.1
Host: api.example.com
X-API-Key: yourapikey
----

Example Response:
[source,http]
----
HTTP/1.1 200 OK
Content-Type: text/plain

Vehicle assigned successfully
----

=== Authentication Flows

Clients must include an API key in the header of each request. This key must be obtained from the API provider and is required to access the API.

=== Common Error Codes and Their Meanings

- `400 Bad Request`: The request was unacceptable, often due to missing a required parameter.
- `401 Unauthorized`: No valid API key provided.
- `404 Not Found`: The requested resource doesn't exist.
- `500 Internal Server Error`: Something went wrong on the server side.

=== Rate Limiting Information

The API is rate-limited to 100 requests per minute per client. Exceeding this limit will result in a `429 Too Many Requests` response.