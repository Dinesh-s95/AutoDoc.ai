= Vehicle Management API Documentation

== Introduction

This document provides a comprehensive overview of the Vehicle Management API, designed to facilitate vehicle registration and verification processes. The API allows clients to register new vehicles and verify existing registrations based on vehicle identification numbers (VINs), brands, and countries.

=== Authentication Requirements

Currently, this API does not require authentication. Future versions might include API key or OAuth2 based authentication mechanisms.

=== Base URL and Versioning

The base URL for all API endpoints is `https://api.example.com/v1`. This document describes version 1 of the API.

=== How to Use This Specification

This specification is written in accordance with the OpenAPI 3.0 standards. It can be imported into tools like Swagger UI, Postman, or Insomnia for testing and interaction with the API endpoints. Developers and API consumers should refer to this document for understanding request and response formats and error handling.

== OpenAPI 3.0 YAML Specification

[source,yaml]
----
openapi: 3.0.0
info:
  title: Vehicle Management API
  version: 1.0.0
  description: API for managing vehicle registrations and verifications.
servers:
  - url: https://api.example.com/v1
    description: Production server

paths:
  /vehicles/register:
    post:
      summary: Register a new vehicle
      operationId: registerVehicle
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Vehicle'
      responses:
        '201':
          description: Vehicle registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Vehicle'
        '400':
          description: Invalid input provided
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /vehicles/verify:
    get:
      summary: Verify vehicle registration
      operationId: verifyRegistration
      parameters:
        - in: query
          name: vin
          schema:
            type: string
          required: true
          description: Vehicle Identification Number
        - in: query
          name: brand
          schema:
            type: string
          required: true
          description: Brand of the vehicle
        - in: query
          name: country
          schema:
            type: string
          required: true
          description: Country of registration
      responses:
        '200':
          description: Verification successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Vehicle'
        '404':
          description: Vehicle not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    Vehicle:
      type: object
      properties:
        vin:
          type: string
          description: Vehicle Identification Number
        brand:
          type: string
          description: Brand of the vehicle
        country:
          type: string
          description: Country of registration
        model:
          type: string
          description: Model of the vehicle
        device:
          type: string
          description: Device associated with the vehicle
        sop:
          type: string
          format: date
          description: Start of production date
      required:
        - vin
        - brand
        - country

    Error:
      type: object
      properties:
        message:
          type: string
          description: Error message explaining what went wrong
        code:
          type: integer
          format: int32
          description: Error code
----

== API Documentation

=== Endpoint Descriptions and Usage Examples

==== Register Vehicle

`POST /vehicles/register`

Registers a new vehicle in the system. The request body must include details such as the VIN, brand, and country.

===== Request Example

[source,json]
----
{
  "vin": "1HGBH41JXMN109186",
  "brand": "Honda",
  "country": "Japan",
  "model": "Civic",
  "device": "Device123",
  "sop": "2023-01-01"
}
----

===== Response Example

[source,json]
----
{
  "vin": "1HGBH41JXMN109186",
  "brand": "Honda",
  "country": "Japan",
  "model": "Civic",
  "device": "Device123",
  "sop": "2023-01-01"
}
----

==== Verify Registration

`GET /vehicles/verify`

Verifies if a vehicle with the specified VIN, brand, and country is registered.

===== Request Example

[source]
----
GET /vehicles/verify?vin=1HGBH41JXMN109186&brand=Honda&country=Japan
----

===== Response Example

[source,json]
----
{
  "vin": "1HGBH41JXMN109186",
  "brand": "Honda",
  "country": "Japan",
  "model": "Civic",
  "device": "Device123",
  "sop": "2023-01-01"
}
----

=== Common Error Codes and Their Meanings

- `400 Bad Request`: The request was invalid or cannot be served. Check the message for more details.
- `404 Not Found`: The specified resource was not found. This can also occur if the request was malformed.

=== Rate Limiting Information

Currently, there is no rate limiting in place for this API. Future versions may include rate limiting policies to ensure fair usage.

This document provides a detailed overview of the Vehicle Management API, including how to interact with it and understand its responses and errors.