= Vehicle Management System Architecture Design

:toc:
:toc-placement: auto
:toc-title: Table of Contents
:sectnums:
:sectnumlevels: 5
:icons: font
:source-highlighter: rouge

== Introduction

This document provides a comprehensive architecture design overview of the Vehicle Management System. It is intended to guide architects and senior developers through the system's design, focusing on the service architecture, component interactions, infrastructure, and system context.

== Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, "high_level_architecture", png]
....
@startuml
skinparam componentStyle uml2

package "Vehicle Management System" {
    [Vehicle Controller] - [Vehicle Service]
    [Vehicle Service] - [Vehicle Repository]
    database "Vehicle Database" {
        [Vehicle Repository] ..> [Vehicle]
    }
}

node "External Systems" {
    [DMV Services]
    [Insurance Provider API]
}

[Vehicle Controller] --> [DMV Services] : Verify Registration
[Vehicle Controller] --> [Insurance Provider API] : Register Vehicle

@enduml
....

=== External System Connections and Integrations

The Vehicle Management System integrates with the following external systems:

- *DMV Services*: For verifying vehicle registrations.
- *Insurance Provider API*: For registering vehicles with insurance providers.

=== Component Interaction Overview

Components interact primarily through RESTful APIs, managed by the `Vehicle Controller`. The controller processes requests, interacting with the `Vehicle Service` for business logic, which in turn communicates with the `Vehicle Repository` to persist data.

=== Technology Stack and Frameworks Used

- *Programming Language*: Java
- *Framework*: Spring Boot
- *Database*: PostgreSQL
- *ORM*: Hibernate
- *API Documentation*: Swagger UI
- *Testing*: JUnit, Mockito

== Component Description

=== Vehicle Controller

*Responsibility*: Handle HTTP requests and responses.
*Role*: Acts as the entry point for all vehicle management operations.
*Interactions*: Communicates with `Vehicle Service` for business operations.

=== Vehicle Service

*Responsibility*: Business logic and validation.
*Role*: Service layer that handles business rules and validations.
*Interactions*: Uses `Vehicle Repository` to access and store vehicle data.

=== Vehicle Repository

*Responsibility*: Data persistence.
*Role*: Data Access Object (DAO) that abstracts the database interactions.
*Interactions*: Interacts with the database to fetch and persist vehicle data.

=== Vehicle Entity

*Responsibility*: Represent the vehicle domain model.
*Role*: ORM entity that maps to the vehicle table in the database.

== Infrastructure Architecture

=== Deployment Architecture

[plantuml, "deployment_architecture", png]
....
@startuml
skinparam componentStyle uml2

cloud "Cloud Environment" {
    node "Application Server" {
        [Vehicle Management System]
    }
    database "Database Server" {
        [Vehicle Database]
    }
}

[Vehicle Management System] ..> [Vehicle Database] : JDBC
@enduml
....

=== Database Architecture

*Database System*: PostgreSQL
*Schema*:
- Vehicle: Stores vehicle details like brand, model, VIN, etc.

=== Security Architecture

*Authentication*: Basic Auth for system access.
*Authorization*: Role-based access control (RBAC) for different user levels.

=== Network Architecture

*Load Balancer*: Distributes incoming traffic among multiple instances.
*Firewall*: Protects against unauthorized access.

== System Context

=== External Systems and Their Interfaces

- *DMV Services*: REST API for vehicle registration verification.
- *Insurance Provider API*: REST API for vehicle insurance registration.

=== Data Flow Between Systems

[plantuml, "data_flow_diagram", png]
....
@startuml
skinparam componentStyle uml2

actor "Client" as client
boundary "Vehicle Controller" as controller
control "Vehicle Service" as service
entity "Vehicle Repository" as repository
database "Vehicle Database" as db

client -> controller : Request (REST API)
controller -> service : Process Request
service -> repository : Data Interaction
repository -> db : CRUD Operations
@enduml
....

=== Authentication and Authorization Flows at System Level

[plantuml, "auth_flow", png]
....
@startuml
actor "User" as user
boundary "Auth Server" as auth
control "Vehicle Controller" as controller

user -> auth : Authenticate
auth -> user : Token
user -> controller : Request + Token
controller -> auth : Validate Token
auth -> controller : Validation Response
@enduml
....

== Conclusion

This document outlines the architectural design of the Vehicle Management System, providing insights into the service architecture, component responsibilities, infrastructure, and system context. It serves as a guide for further development and maintenance of the system.