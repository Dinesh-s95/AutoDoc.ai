= API Documentation for Enrollment Service

== Introduction

This document provides a comprehensive overview and technical details of the Enrollment Service API. The API allows managing user enrollments for a mobility service.

=== Authentication Requirements

The API uses OAuth 2.0 for authentication. All requests must include a valid access token in the Authorization header.

=== Base URL and Versioning

The base URL for all API endpoints is `https://api.example.com/v1`. This documentation refers to version 1 of the API.

=== How to Use This Specification

This OpenAPI specification is designed to be used with tools that support the OpenAPI 3.0 format, such as Swagger UI, Postman, and Insomnia. You can import this YAML into any of these tools to interact with the API or generate client code.

== OpenAPI 3.0 YAML Specification

[source,yaml]
----
openapi: 3.0.0
info:
  title: Enrollment Service API
  version: 1.0.0
  description: API for managing user enrollments in a mobility service.
servers:
  - url: https://api.example.com/v1
paths:
  /nominatePrimary:
    post:
      summary: Nominate a primary user
      operationId: nominatePrimary
      tags:
        - Enrollment
      parameters:
        - name: username
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Successful operation
          content:
            text/plain:
              schema:
                type: string
                example: "Primary user nominated successfully."
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
          example: "Invalid parameters provided."
security:
  - OAuth2: [read, write]
securitySchemes:
  OAuth2:
    type: oauth2
    flows:
      authorizationCode:
        authorizationUrl: https://auth.example.com/oauth/authorize
        tokenUrl: https://auth.example.com/oauth/token
        scopes:
          read: Read access
          write: Write access
----

== API Documentation

=== Endpoint: POST /nominatePrimary

Nominate a primary user for the mobility service. This endpoint can be used with or without a `username` parameter. If no username is provided, the service will nominate a default primary user.

==== Request Examples

Without username:

[source,http]
----
POST /nominatePrimary HTTP/1.1
Host: api.example.com
Authorization: Bearer your_access_token_here
----

With username:

[source,http]
----
POST /nominatePrimary?username=john.doe HTTP/1.1
Host: api.example.com
Authorization: Bearer your_access_token_here
----

==== Response Examples

Successful nomination:

[source,http]
----
HTTP/1.1 200 OK
Content-Type: text/plain

Primary user nominated successfully.
----

Error response:

[source,json]
----
{
  "message": "Invalid parameters provided."
}
----

=== Authentication Flows

The API uses OAuth 2.0 with the Authorization Code grant type. Clients must first authenticate with the authorization server and obtain an access token.

=== Common Error Codes

- `400 Bad Request`: The request was invalid or cannot be served. Check the message for more information.
- `401 Unauthorized`: The request requires user authentication. Token may be missing or invalid.

=== Rate Limiting

There is no rate limiting in place for this API as of the current version.

This document provides all necessary details to interact with the Enrollment Service API effectively. For further queries or support, please contact the API support team at support@example.com.