= Enrollment System Architecture Design

== Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, diagram-architecture, png]
----
@startuml
package "Enrollment System" {
  [EnrollmentApplication] as app
  [EnrollmentController] as controller
  [EnrollmentService] as service
  [EnrollmentRepository] as repository
  [UserManagementClient] as userClient
  database "Enrollment Database" as database

  app --> controller
  controller --> service
  service --> repository
  repository --> database
  service --> userClient
}

node "External User Management System" {
  [User Service] as userService
}

userClient ..> userService : "Feign Client\nIntegration"
@enduml
----

=== External System Connections and Integrations

The Enrollment System integrates with an external User Management System via a Feign client (`UserManagementClient`). This client communicates with the User Service to fetch and manage user data.

=== Component Interaction Overview

1. **EnrollmentController** receives HTTP requests and delegates operations to **EnrollmentService**.
2. **EnrollmentService** interacts with **EnrollmentRepository** for database operations and **UserManagementClient** for external user data.
3. **EnrollmentRepository** directly manages database transactions.
4. **UserManagementClient** serves as a bridge to external systems for user-related operations.

=== Technology Stack and Frameworks Used

- **Spring Boot**: Framework for creating stand-alone, production-grade Spring based applications.
- **Spring Data JPA**: Provides repository support for JPA-based data access layers.
- **Spring Cloud OpenFeign**: Enables easy HTTP client integration.
- **MySQL**: Database for storing enrollment data.
- **JUnit**: For unit testing of the application.

== Component Description

=== EnrollmentApplication

**Responsibility and Role**:
- Acts as the bootstrap class containing the main method to start the application.

=== UserManagementClient

**Responsibility and Role**:
- Provides integration with external User Management System via HTTP using Spring Cloud OpenFeign.

=== EnrollmentController

**Responsibility and Role**:
- Handles incoming HTTP requests and delegates business operations to the EnrollmentService.

=== UserResponseDTO

**Responsibility and Role**:
- Acts as a Data Transfer Object to encapsulate user data received from external systems.

=== Enrollment

**Responsibility and Role**:
- JPA entity representing the enrollment data model.

=== EnrollmentRepository

**Responsibility and Role**:
- Interface for database operations, utilizing Spring Data JPA.

=== EnrollmentService

**Responsibility and Role**:
- Business service for handling logic related to enrollment operations. Communicates with both the database and external user services.

== Infrastructure Architecture

=== Deployment Architecture

[plantuml, diagram-deployment, png]
----
@startuml
cloud "Cloud Environment" {
  node "Application Server" {
    [EnrollmentApplication]
  }
  database "Database Server" {
    folder "MySQL Database" {
      [Enrollment Data]
    }
  }
}
@enduml
----

=== Database Architecture

**Database**: MySQL
- Tables:
  - **Enrollment**: Stores enrollment records.

=== Security Architecture

- **HTTPS** for secure communication.
- **Spring Security** for authentication and authorization.

=== Network Architecture

- The application is deployed within a VPC, with controlled access to the database and external integrations through security groups.

== System Context

=== External Systems and Their Interfaces

- **User Management System**: Accessed via RESTful services provided by the User Service.

=== Data Flow Between Systems

[plantuml, diagram-dataflow, png]
----
@startuml
actor "Client" as client
boundary "Enrollment System" as system
database "Enrollment Database" as db
node "User Management System" as ums

client -> system : "HTTP Request (Enroll User)"
system -> db : "Query/Update"
system -> ums : "Fetch User Data"
ums -> system : "User Data Response"
system -> client : "Response"
@enduml
----

=== Authentication and Authorization Flows at System Level

- Authentication against User Management System.
- Authorization using roles stored within the Enrollment Database.

This architecture document provides a comprehensive overview of the Enrollment System, detailing component responsibilities, interactions, and the overall infrastructure setup. It is designed to guide architects and developers through understanding and potentially enhancing the system.