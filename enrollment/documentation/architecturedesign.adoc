= Enrollment System Architecture Design

This document provides a comprehensive architecture design for the Enrollment System, developed using Java Spring Boot. The system is designed to handle user enrollments and integrates with external user management services.

== 1. Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, diagram-arch, png]
----
@startuml
package "Enrollment System" {
  [EnrollmentApplication] as app
  [EnrollmentController] as controller
  [EnrollmentService] as service
  [EnrollmentRepository] as repository
  database "Enrollment Database" as db {
    [Enrollment]
  }
}

[UserManagementClient] --> [User API]

app --> controller
controller --> service
service --> repository
repository --> db
service --> [UserManagementClient]

@enduml
----

=== External System Connections and Integrations

The Enrollment System integrates with an external User API via the `UserManagementClient` using Feign clients for communication. This integration facilitates the retrieval and management of user data necessary for enrollment processes.

=== Component Interaction Overview

- `EnrollmentApplication` initializes the Spring Boot application.
- `EnrollmentController` handles incoming HTTP requests and delegates business logic execution to `EnrollmentService`.
- `EnrollmentService` performs the core business logic, interacts with `EnrollmentRepository` for data persistence, and communicates with external systems via `UserManagementClient`.
- `EnrollmentRepository` manages database interactions for the `Enrollment` entity.

=== Technology Stack and Frameworks Used

- **Language:** Java
- **Framework:** Spring Boot
- **Data Access:** Spring Data JPA
- **Database:** MySQL
- **Client-Side Communication:** Spring Cloud OpenFeign
- **Testing:** Spring Boot Test

== 2. Component Description

=== EnrollmentApplication

Responsible for bootstrapping the Spring Boot application. It does not contain business logic but initializes the application context and configurations.

=== EnrollmentController

A REST controller that exposes HTTP endpoints to interact with the system. It uses `EnrollmentService` to process enrollment-related requests.

=== EnrollmentService

The service layer component that contains business logic for nominating primary users and other enrollment operations. It interacts with `EnrollmentRepository` for data persistence and `UserManagementClient` for external user data.

=== EnrollmentRepository

A Spring Data repository that abstracts the data layer, providing automatic CRUD operations related to the `Enrollment` entity.

=== UserManagementClient

A Feign client that provides a declarative method of invoking REST services. It interacts with the external User API to fetch and manage user data.

== 3. Infrastructure Architecture

=== Deployment Architecture

The system is containerized using Docker, allowing for easy deployment and scalability. It is deployed on Kubernetes for orchestration.

=== Database Architecture

The system uses MySQL as its relational database. `Enrollment` entities are stored and managed in this database.

=== Security Architecture

Security is managed via Spring Security, providing robust authentication and authorization. JWT tokens are used for securing endpoints.

=== Network Architecture

The system is deployed within a VPC with restricted access. Communication between services is secured using TLS.

== 4. System Context

=== External Systems and Their Interfaces

The system interacts with an external User API, which provides user management functionalities. The interface is REST-based, accessed via HTTP GET and POST requests.

=== Data Flow Between Systems

Data flows from the `EnrollmentController` to `EnrollmentService`, then either to `EnrollmentRepository` for database interactions or `UserManagementClient` for external API communication.

=== Authentication and Authorization Flows at System Level

Authentication is handled via JWT tokens. Users authenticate through a separate Authentication Service (not detailed in this document), which issues tokens that are then used to authorize requests within the Enrollment System.

This architecture document provides a detailed overview of the Enrollment System, designed to be scalable, secure, and maintainable, leveraging modern Java Spring Boot technologies and best practices.