= Enrollment System Architecture Design

This document provides a comprehensive overview of the architecture for the Enrollment System, designed using Java Spring Boot. It covers the service architecture, component descriptions, infrastructure setup, and system context.

== Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, diagram-arch, png]
....
@startuml
package "Spring Boot Application" {
    component [EnrollmentApplication] as App
    component [EnrollmentController] as Controller
    component [EnrollmentService] as Service
    database [EnrollmentRepository] as Repository

    App --> Controller
    Controller --> Service
    Service --> Repository
}

node "External Systems" {
    component [UserManagementClient] as UserClient
}

cloud {
    [User Management System]
}

UserClient ..> [User Management System] : Feign Client
@enduml
....

=== External System Connections and Integrations

The Enrollment System integrates with an external User Management System via `UserManagementClient`, a Feign client. This integration facilitates the retrieval and management of user data necessary for the enrollment processes.

=== Component Interaction Overview

1. **EnrollmentApplication** initializes the Spring Boot application.
2. **EnrollmentController** handles HTTP requests and interacts with **EnrollmentService** to process business logic.
3. **EnrollmentService** uses **EnrollmentRepository** for data persistence and interacts with external systems through **UserManagementClient**.

=== Technology Stack and Frameworks Used

- **Java Spring Boot**: Framework for creating the application and RESTful services.
- **Spring Data JPA**: For database operations.
- **Feign Client**: For REST-based service consumption from external systems.
- **H2 Database**: In-memory database for development.
- **JUnit**: For unit testing.

== Component Description

=== EnrollmentApplication

The entry point of the Spring Boot application, responsible for bootstrapping and configuring the application context.

=== UserManagementClient

A Feign client that provides connectivity to external User Management Systems, abstracting the complexity of remote HTTP interactions.

=== EnrollmentController

A REST controller that exposes HTTP endpoints for enrolling users. It processes incoming HTTP requests and delegates business operations to `EnrollmentService`.

=== UserResponseDTO

A Data Transfer Object (DTO) used to encapsulate user data transferred between processes.

=== Enrollment

An entity representing the enrollment data model, mapped to a database table via JPA annotations.

=== EnrollmentRepository

An interface extending `JpaRepository`, used for data access operations on `Enrollment` entities.

=== EnrollmentService

A service component that contains business logic for nominating primary and secondary users. It interacts with both `EnrollmentRepository` and `UserManagementClient`.

=== EnrollmentApplicationTests

Contains integration tests for the application, ensuring that all components work together correctly.

== Infrastructure Architecture

=== Deployment Architecture

The application is containerized using Docker, allowing for easy deployment and scaling within a Kubernetes cluster.

=== Database Architecture

The system uses an H2 in-memory database for development, with entities managed by Spring Data JPA.

=== Security Architecture

Security is managed via Spring Security, providing features such as authentication and authorization.

=== Network Architecture

The application is deployed within a VPC, with controlled access to external systems and databases through security groups.

== System Context

=== External Systems and Their Interfaces

The system interacts with an external User Management System via REST APIs, managed by `UserManagementClient`.

=== Data Flow Between Systems

1. **EnrollmentController** receives HTTP requests and interacts with **EnrollmentService**.
2. **EnrollmentService** fetches user data from the User Management System via **UserManagementClient**.
3. Responses are sent back to the client from **EnrollmentController**.

=== Authentication and Authorization Flows at System Level

Authentication and authorization are managed using Spring Security, which integrates with external identity providers to validate credentials and permissions.

This document provides a structured overview of the Enrollment System's architecture, suitable for use by architects and senior developers involved in the project.