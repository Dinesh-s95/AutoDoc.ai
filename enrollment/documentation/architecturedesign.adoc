= Enrollment System Architecture Design

This document provides a comprehensive architecture design overview of the Enrollment System developed using Java Spring Boot. The system is designed to handle user enrollments and integrates with an external User Management System.

== 1. Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, diagram-architecture, png]
----
@startuml
package "Enrollment System" {
  node "EnrollmentApplication" {
    [EnrollmentController]
    [EnrollmentService]
    [EnrollmentRepository]
  }
  database "Enrollment Database" {
    [Enrollment]
  }
}

cloud "External Systems" {
  [User Management System]
}

[EnrollmentController] --> [EnrollmentService] : uses
[EnrollmentService] --> [EnrollmentRepository] : uses
[EnrollmentService] --> [User Management System] : uses
[EnrollmentRepository] --> [Enrollment Database] : reads/writes
@enduml
----

=== External System Connections and Integrations

The Enrollment System integrates with the following external systems:
- **User Management System**: Communicates via REST API to manage user data.

=== Component Interaction Overview

Components within the Enrollment System interact primarily through Spring-managed beans:
- **EnrollmentController** receives HTTP requests and delegates business logic to **EnrollmentService**.
- **EnrollmentService** performs business operations and interacts with **EnrollmentRepository** for data persistence.
- **EnrollmentService** also communicates with **User Management System** via Feign client for external user data.

=== Technology Stack and Frameworks Used

- **Java Spring Boot**: Framework for creating microservices.
- **Spring Data JPA**: For database operations.
- **Feign Client**: For REST-based service consumption.
- **MySQL**: As the relational database.
- **JUnit**: For unit testing.

== 2. Component Description

=== EnrollmentController

- **Responsibility**: Handles all web requests for enrollment operations.
- **Role**: Acts as the entry point for the `/enrollment` endpoints.
- **Interactions**: Calls `EnrollmentService` to process business logic.

=== EnrollmentService

- **Responsibility**: Contains business logic for enrollment processes.
- **Role**: Service layer that handles business operations.
- **Interactions**: Uses `EnrollmentRepository` for database interactions and `User Management Client` for external user data.

=== EnrollmentRepository

- **Responsibility**: Interface for database operations related to `Enrollment` entities.
- **Role**: Data Access Object (DAO) that abstracts and encapsulates all access to the data source.
- **Interactions**: Communicates directly with the MySQL database.

=== UserManagementClient

- **Responsibility**: Feign client for interacting with the User Management System.
- **Role**: External service invoker.
- **Interactions**: Used by `EnrollmentService` to fetch or manipulate user data externally.

== 3. Infrastructure Architecture

=== Deployment Architecture

The system is containerized using Docker and orchestrated with Kubernetes for scalability and resilience.

=== Database Architecture

- **Database**: MySQL
- **Schema**: Contains tables like `Enrollment` which stores enrollment details.

=== Security Architecture

- **Authentication**: Integrates with OAuth for secure access.
- **Authorization**: Uses Spring Security for role-based access control.

=== Network Architecture

The system is deployed within a VPC with restricted access, ensuring secure communication channels.

== 4. System Context

=== External Systems and Their Interfaces

- **User Management System**: Accessed via REST APIs provided by the `UserManagementClient`.

=== Data Flow Between Systems

Data flows from the `EnrollmentController` to `EnrollmentService`, then either to `EnrollmentRepository` for persistence or to external systems via `UserManagementClient`.

=== Authentication and Authorization Flows at System Level

Authentication is handled via OAuth tokens, with Spring Security enforcing role-based access controls based on the authenticated user.

This architecture document provides a detailed overview of the Enrollment System, ensuring that architects and senior developers can understand and contribute effectively to the project.