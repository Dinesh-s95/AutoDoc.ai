= Enrollment System Architecture Design

This document provides a comprehensive architecture design for the Enrollment System, developed using Java Spring Boot. The system is designed to manage user enrollments with external integrations for user management.

== 1. Service Architecture Overview

=== High-level System Architecture Diagram

[plantuml, diagram-architecture, png]
----
@startuml
!define SPRING #SpringGreen
!define ENTITY #MistyRose
!define DATABASE #LightSkyBlue

package "Spring Boot Application" {
  [EnrollmentApplication] << SPRING >>
  [EnrollmentController] << SPRING >>
  [EnrollmentService] << SPRING >>
  [UserManagementClient] << SPRING >>
  [EnrollmentRepository] << SPRING >>
}

database "Enrollment Database" {
  [Enrollment] << ENTITY >>
}

[EnrollmentApplication] --> [EnrollmentController]
[EnrollmentController] --> [EnrollmentService]
[EnrollmentService] --> [EnrollmentRepository]
[EnrollmentService] --> [UserManagementClient]
[EnrollmentRepository] --> [Enrollment]

cloud {
  [User Management System] << DATABASE >>
}

[UserManagementClient] --> [User Management System]

@enduml
----

=== External System Connections and Integrations

The Enrollment System integrates with an external User Management System via the `UserManagementClient` using Feign for RESTful communication. This client facilitates fetching and updating user data necessary for enrollment processes.

=== Component Interaction Overview

- **EnrollmentApplication** initializes the Spring Boot application.
- **EnrollmentController** handles incoming HTTP requests and delegates operations to **EnrollmentService**.
- **EnrollmentService** performs the business logic, interacts with the database through **EnrollmentRepository**, and communicates with external systems via **UserManagementClient**.
- **EnrollmentRepository** provides data access to the **Enrollment** entity stored in the database.

=== Technology Stack and Frameworks Used

- **Spring Boot**: Framework for creating stand-alone, production-grade Spring-based Applications.
- **Spring Data JPA**: For database operations.
- **Feign**: For declarative REST client creation.
- **H2 Database**: In-memory database for development.
- **MySQL**: Production database.
- **JUnit**: For unit testing.

== 2. Component Description

=== EnrollmentApplication

Responsible for bootstrapping the Spring Boot application. It does not interact directly with other components but initializes the Spring context.

=== EnrollmentController

A REST controller that exposes HTTP endpoints to handle enrollment-related requests. It uses **EnrollmentService** for processing business logic.

=== EnrollmentService

Central business logic handler for enrollment operations. It interacts with **EnrollmentRepository** for data persistence and **UserManagementClient** for external user data interactions.

=== EnrollmentRepository

Data access layer that abstracts the database interactions. It uses Spring Data JPA to interact with the **Enrollment** entity.

=== UserManagementClient

A Feign client that provides methods to interact with the external User Management System. It is used by **EnrollmentService** to fetch and update user data.

== 3. Infrastructure Architecture

=== Deployment Architecture

The application is containerized using Docker, allowing it to be deployed on any Docker-compatible environment, including Kubernetes clusters for scaling purposes.

=== Database Architecture

The system uses MySQL in production for persistent storage of enrollment data. The database schema is managed through Hibernate ORM with Spring Data JPA.

=== Security Architecture

Security is enforced using Spring Security, providing both authentication and authorization capabilities. JWT tokens are used for stateless authentication.

=== Network Architecture

The system is deployed within a VPC with restricted access. Only the necessary ports are exposed, and traffic is routed through a load balancer.

== 4. System Context

=== External Systems and Their Interfaces

The system interacts with an external User Management System via REST APIs. The communication is secured and authenticated using API keys.

=== Data Flow Between Systems

Data flows from the **EnrollmentController** to **EnrollmentService**, then either to **EnrollmentRepository** for database operations or **UserManagementClient** for external interactions.

=== Authentication and Authorization Flows at System Level

Authentication is handled via Spring Security, where JWT tokens are issued upon successful authentication. Authorization is managed by roles defined within the JWT.

This architecture document provides a detailed overview of the Enrollment System, designed for scalability, security, and maintainability, suitable for understanding by architects and senior developers.